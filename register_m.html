<!-- <?php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Conexiune la baza de date
    $conn = new mysqli("localhost", "root", "", "mire_db");
    if ($conn->connect_error) {
        die("Conexiune eșuată: " . $conn->connect_error);
    }

    // Preluare și sanitizare date din formular
    $nume = $conn->real_escape_string($_POST['nume']);
    $email = $conn->real_escape_string($_POST['email']);
    $parola = password_hash($_POST['parola'], PASSWORD_DEFAULT);
    $telefon = $conn->real_escape_string($_POST['telefon']);
    $religie = $conn->real_escape_string($_POST['religie']);
    $data_nunta = $conn->real_escape_string($_POST['data_nunta']);
    $locatie = $conn->real_escape_string($_POST['locatie']);
    $invitati = (int) $_POST['invitati'];

    // Inserare în baza de date
    $sql = "INSERT INTO users (nume, email, parola, telefon, religie, data_nunta, locatie, invitati)
            VALUES ('$nume', '$email', '$parola', '$telefon', '$religie', '$data_nunta', '$locatie', $invitati)";
    if ($conn->query($sql) === TRUE) {
        echo "Account created successfully!";
    } else {
        echo "Error: " . $conn->error;
    }

    $conn->close();
} else {
    // Afișează formularul când pagina este accesată fără trimitere POST
    ?>

    <form method="post" action="register_m.php">
        <label>Nume:</label><br>
        <input type="text" name="nume" required><br><br>
        <label>Email:</label><br>
        <input type="email" name="email" required><br><br>
        <label>Parola:</label><br>
        <input type="password" name="parola" required><br><br>
        <label>Telefon:</label><br>
        <input type="text" name="telefon" required><br><br>
        <label>Religie:</label><br>
        <input type="text" name="religie" required><br><br>
        <label>Data Nunta:</label><br>
        <input type="date" name="data_nunta" required><br><br>
        <label>Locatie:</label><br>
        <input type="text" name="locatie" required><br><br>
        <label>Numar invitati:</label><br>
        <input type="number" name="invitati" required><br><br>
        <button type="submit">Inregistreaza-te</button>
    </form>

    <?php
}
?> -->
<?php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    echo "<pre>POST data:\n";
    print_r($_POST);
    echo "</pre>";

    // Conexiune la baza de date
    $conn = new mysqli("localhost", "root", "", "mire_db");
    if ($conn->connect_error) {
        die("Conexiune eșuată: " . $conn->connect_error);
    }

    // Accesare sigură a $_POST
    $nume = isset($_POST['nume']) ? $conn->real_escape_string($_POST['nume']) : '';
    $email = isset($_POST['email']) ? $conn->real_escape_string($_POST['email']) : '';
    $parola = isset($_POST['parola']) ? password_hash($_POST['parola'], PASSWORD_DEFAULT) : '';
    $telefon = isset($_POST['telefon']) ? $conn->real_escape_string($_POST['telefon']) : '';
    $religie = isset($_POST['religie']) ? $conn->real_escape_string($_POST['religie']) : '';
    $data_nunta = isset($_POST['data_nunta']) ? $conn->real_escape_string($_POST['data_nunta']) : '';
    $locatie = isset($_POST['locatie']) ? $conn->real_escape_string($_POST['locatie']) : '';
    $invitati = isset($_POST['invitati']) ? (int) $_POST['invitati'] : 0;

    $sql = "INSERT INTO users (nume, email, parola, telefon, religie, data_nunta, locatie, invitati)
            VALUES ('$nume', '$email', '$parola', '$telefon', '$religie', '$data_nunta', '$locatie', $invitati)";
    if ($conn->query($sql) === TRUE) {
        echo "Account created successfully!";
    } else {
        echo "Error: " . $conn->error;
    }

    $conn->close();
} else {
    // afișare formular
    ?>

    <form method="post" action="register_m.php">
        <!-- formularul tău -->
    </form>

    <?php
}
?>
